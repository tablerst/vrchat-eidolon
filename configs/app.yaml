# 可版本化的主配置（敏感信息用环境变量注入）

qwen:
  api_key: ${DASHSCOPE_API_KEY}
  base_url: https://dashscope.aliyuncs.com/compatible-mode/v1
  model: qwen3-omni-flash
  timeout_s: 30
  max_retries: 3
  # Qwen-Omni-Realtime (WebSocket)
  # Docs: https://help.aliyun.com/zh/model-studio/realtime
  realtime:
    url: wss://dashscope.aliyuncs.com/api-ws/v1/realtime
    model: qwen3-omni-flash-realtime
    voice: Cherry
    instructions: You are a helpful assistant.
    # Realtime wire audio format is not fully configurable via session.update.
    # DashScope reference samples use: input 16 kHz mono PCM16, output 24 kHz mono.
    # The app will resample between your device rate and these wire rates.
    input_sample_rate_hz: 16000
    output_sample_rate_hz: 24000
    input_channels: 1
    output_channels: 1
    turn_detection:
      # server VAD threshold in [0, 1]
      threshold: 0.5

audio:
  input:
    device: null
    sample_rate: 48000
    channels: 1
    # Chunk size for streaming to Realtime.
    chunk_ms: 100
  output:
    # Default to system output device. For VB-CABLE etc, override in configs/dev.yaml.
    device: null
    sample_rate: 48000
    channels: 1
  vad:
    silence_duration_ms: 500
    min_speech_duration_ms: 300
    energy_threshold: 0.02

tools:
  enabled: true
  max_calls_per_turn: 5
  max_concurrency: 5
  # Allow-all by default: an empty whitelist means all tools are allowed.
  whitelist: []
  rate_limit:
    vrc_chat_send: 2

# External VRChat control is provided by an MCP server (not implemented in this repo).
mcp:
  enabled: false
  # Preferred: multi-server config passed to langchain-mcp-adapters MultiServerMCPClient.
  # servers:
  #   vrchat:
  #     transport: streamable_http
  #     url: http://127.0.0.1:8001/mcp
  #     # headers:
  #     #   Authorization: Bearer ${MCP_TOKEN}
